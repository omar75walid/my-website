<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ´Ø®ÙŠØµ Ø¨Ø§Ù„ØµÙˆØª</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ğŸ™ï¸ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø¨Ø§Ù„ØµÙˆØª</h1>
  <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙˆØ§Ø¨Ø¯Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯Ø« Ø¹Ù† Ø­Ø§Ù„ØªÙƒØŒ Ù…Ø«Ø§Ù„: "Ø£Ù†Ø§ Ø¹Ù†Ø¯ÙŠ ØµØ¯Ø§Ø¹ Ø´Ø¯ÙŠØ¯"</p>
  <button onclick="startListening()">ğŸ¤ Ø§Ø¶ØºØ· Ù„Ù„ØªØ­Ø¯Ø«</button>
  <p id="result" style="font-size: 20px; margin-top: 20px;"></p>

  <button onclick="location.href='home.html'">ğŸ  Ø±Ø¬ÙˆØ¹</button>
  <button onclick="toggleMode()">ğŸŒ“ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ</button>

  <script src="data.js"></script>
  <script>
    function speak(text) {
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "ar-EG";
      speechSynthesis.speak(u);
    }

    function startListening() {
      const resultEl = document.getElementById("result");

      if (!('webkitSpeechRecognition' in window)) {
        resultEl.textContent = "âŒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª.";
        speak("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…ÙŠØ²Ø© Ø§Ù„ØµÙˆØª.");
        return;
      }

      const recognition = new webkitSpeechRecognition();
      recognition.lang = "ar-EG";
      recognition.start();

      recognition.onresult = function(event) {
        const text = event.results[0][0].transcript;
        resultEl.textContent = "âœ… ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰: " + text;
        diagnose(text);
      };

      recognition.onerror = function() {
        resultEl.textContent = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹.";
        speak("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª.");
      };
    }

    function diagnose(input) {
      const resultEl = document.getElementById("result");
      let found = false;

      for (const key in medicalData) {
        if (input.includes(key)) {
          const answer = medicalData[key];
          resultEl.textContent += "\\nğŸ¤– Ø§Ù„ØªØ´Ø®ÙŠØµ: " + answer;
          speak(answer);
          found = true;
          break;
        }
      }

      if (!found) {
        resultEl.textContent += "\\nâ“ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§ÙÙŠØ©.";
        speak("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§ÙÙŠØ© Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶.");
      }
    }

    function toggleMode() {
      document.body.classList.toggle("dark-mode");
    }
  </script>
</body>
</html>
